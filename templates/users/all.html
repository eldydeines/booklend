{% extends 'base.html' %}

{% block content %}
<h1>BookLandiers</h1>

<div class="table-responsive">
    <table class="table table-striped align-middle">
        <thead>
            <tr>
                <th scope="col">Username</th>
                <th scope="col">Average Rating</th>
                <th scope="col">Profile</th>
                <th scope="col">Favorite Book</th>
                <th scope="col">Favorite Author</th>
                <th scope="col">Actions</th>
            </tr>
        </thead>
        <tbody>

            {% for u in users %}
            <tr>
                <th scope="row">{{u.username}}</th>
                <td>

                    <span class="text-primary">
                        {% if u.avg_rating == 0 or u.avg_rating == None -%}
                        <i class="far fa-heart"></i>
                        <i class="far fa-heart"></i>
                        <i class="far fa-heart"></i>
                        <i class="far fa-heart"></i>
                        <i class="far fa-heart"></i>
                        {% elif u.avg_rating > 1 and u.avg_rating <= 1.5 -%} <i class="fas fa-heart"></i>
                            <i class="far fa-heart"></i>
                            <i class="far fa-heart"></i>
                            <i class="far fa-heart"></i>
                            <i class="far fa-heart"></i>
                            {% elif u.avg_rating > 1.5 and u.avg_rating <= 2.5 -%} <i class="fas fa-heart"></i>
                                <i class="fas fa-heart"></i>
                                <i class="far fa-heart"></i>
                                <i class="far fa-heart"></i>
                                <i class="far fa-heart"></i>
                                {% elif u.avg_rating > 2.5 and u.avg_rating <= 3.5 -%} <i class="fas fa-heart"></i>
                                    <i class="fas fa-heart"></i>
                                    <i class="fas fa-heart"></i>
                                    <i class="far fa-heart"></i>
                                    <i class="far fa-heart"></i>
                                    {% elif u.avg_rating > 3.5 and u.avg_rating <= 4.5 -%} <i class="fas fa-heart"></i>
                                        <i class="fas fa-heart"></i>
                                        <i class="fas fa-heart"></i>
                                        <i class="fas fa-heart"></i>
                                        <i class="far fa-heart"></i>
                                        {% else -%}
                                        <i class="fas fa-heart"></i>
                                        <i class="fas fa-heart"></i>
                                        <i class="fas fa-heart"></i>
                                        <i class="fas fa-heart"></i>
                                        <i class="fas fa-heart"></i>
                                        {% endif %}
                    </span>
                </td>
                <td>{{u.profile}}</td>
                <td>{{u.fav_book}}</td>
                <td>{{u.fav_author}}</td>

                <td>
                    {% if u.user_id == g.user.user_id %}
                    <a href="/user/library">
                        {% else %}
                        <a href="/user/profile/{{u.user_id}}">
                            {% endif %}
                            <i class="fas fa-user-circle"></i>
                            {{u.username}} Book Shelf</a>

                        |
                        {% if u.user_id in ratings and u.user_id != g.user_id %}
                        update review
                        {% elif u.user_id != g.user_id %}
                        <a href="/user/{{u.user_id}}/review">

                            <i class="fas fa-heart"></i>
                            Add Lender Review</a>

                        {% endif %}
                </td>
            </tr>
            {% endfor %}

        </tbody>
    </table>
</div>
{% endblock %}